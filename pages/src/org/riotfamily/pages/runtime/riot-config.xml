<?xml version="1.0" encoding="UTF-8"?>
<riot-config
	xmlns="http://www.riotfamily.org/schema/riot/riot-config"
	xmlns:ed="http://www.riotfamily.org/schema/riot/editor-config"
	xmlns:list="http://www.riotfamily.org/schema/riot/list-config"
	xmlns:form="http://www.riotfamily.org/schema/forms/form-config"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
		http://www.riotfamily.org/schema/riot/riot-config
		http://www.riotfamily.org/schema/riot/riot-config.xsd
		http://www.riotfamily.org/schema/riot/editor-config
		http://www.riotfamily.org/schema/riot/editor-config.xsd
		http://www.riotfamily.org/schema/riot/list-config
		http://www.riotfamily.org/schema/riot/list-config.xsd
		http://www.riotfamily.org/schema/forms/form-config
		http://www.riotfamily.org/schema/forms/form-config.xsd">

	<ed:list id="sitemap" list-ref="site-chooser" icon="sitemap">
		<ed:tree id="pages" list-ref="pages">
			<ed:form id="page" form-ref="page" label-property="pathComponent" />
		</ed:tree>
	</ed:list>
	
	<ed:list id="sites" list-ref="sites" icon="world">
		<ed:form form-ref="site" />
	</ed:list>

	<list:list id="site-chooser">
		<list:dao ref="siteRiotDao" />
		<list:columns>
			<list:column property="locale" renderer="countryFlagRenderer" />
			<list:column property="name" />
			<list:column property="locale.language" renderer="localeRenderer" lookup-level="2" />
			<list:column property="locale.country" renderer="localeRenderer" lookup-level="2" />
			<list:command id="stepInto" />
		</list:columns>
	</list:list>
	
	<list:list id="sites" default-command="edit">
		<list:dao ref="siteRiotDao" />
		<list:columns>
			<list:column property="locale" renderer="countryFlagRenderer" />
			<list:column property="name" />
			<list:column property="locale.language" renderer="localeRenderer" lookup-level="2" />
			<list:column property="locale.country" renderer="localeRenderer" lookup-level="2" />
			<list:column property="enabled" renderer="cssClassRenderer" />
			<list:command id="moveUp" />
			<list:command id="moveDown" />
			<list:command id="edit" />
			<list:command id="delete" />
			<list:command id="gotoSite" />
		</list:columns>
		<list:command id="add" />
	</list:list>

	<list:list id="pages" default-command="showChildPages">
		<list:dao ref="pageRiotDao" />
		<list:columns>
			<list:column property="title" />
			<list:column property="pathComponent" />
			<list:command id="publishPage" />
			<list:command id="moveUpPage" />
			<list:command id="moveDownPage" />
			<list:command id="cutPage" />
			<list:command id="editPage" />
			<list:command id="deletePage" />
			<list:command id="gotoPage" />
			<list:command id="showChildPages" />
		</list:columns>
		<list:command id="add"/>
		<list:command id="pastePage" />
	</list:list>
	
	<form:form id="site" bean-class="org.riotfamily.pages.model.Site">
		<form:group label-key="site.general">
			<form:textfield bind="name" max-length="255" />
			<form:textfield bind="locale" required="true" max-length="8" />
			<form:selectbox bind="theme">
				<form:options ref="themes" />
			</form:selectbox>
			<form:selectbox bind="masterSite">
				<form:options ref="siteRiotDao" />
			</form:selectbox>
		</form:group>
		<form:group label-key="site.mapping">
			<form:textfield bind="hostName" />
			<form:textfield bind="pathPrefix" />
			<form:checkbox bind="enabled" default="checked" />
		</form:group>
		<form:list bind="aliases" sortable="false">
			<form:textfield />
		</form:list>
	</form:form>

	<form:form id="page" bean-class="org.riotfamily.pages.model.Page">
		<form:group label-key="page.location">
			<form:textfield bind="pathComponent" required="true" regex="([A-Za-z0-9_.,*@{}-]*)" />
			<form:checkbox bind="folder" />
		</form:group>
	</form:form>

</riot-config>
